      
      The 1949 EDSAC Computer Rebuild
      
      Tony Abbey
      
      >> Great pleasure to present a fellow  Leicestrian?  How do we pronounce that?  Talking about the 1949 EDSAC build, which is awesome.  Please welcome Tony.
      TONY: Cheers, everybody.  Thanks.  Thanks for coming.  Because I know there's a lot of opposition in one of the other theaters.  So, I did try to get this talk moved away from sex robots, but I wasn't successful.  Anyway.
      EDSAC.  EDSAC means electronic delay storage automatic computer.  And it was the  the first real programmable computer that was built in the UK.  And it provided the computing service at Cambridge University from 1949 to 1958.  So, has anybody heard of EDSAC before?  I won't be able to see you anyway.  Good lord, that's fantastic.  And how many of you used thermionic valves or tubes as our American cousins call them.  Quite a few of you.  That's fantastic.
      So, EDSAC was the first practical general purpose stored program electronic digital computer, that's a mouthful, isn't it?  And it provided the first computing service for Cambridge University.  And it ran its first programs which was the squares of the numbers from 1 to 100 printed out on a teleprinter on the 6th of May 1949.  And it used nearly 3500 valves and took 12 kilowatts.  It transformed science because prior to that everyone was using mechanical calculators and it was 1500 times faster than the sort of calculators that it replaced.  And it won three Nobel Prizes.  People like Fred Hoyle were involved.  Guys working the out molecular structure of hemoglobin.  All these things required lots and lots of calculations.  Sines and cosines on the crystallography measurements being made.  And the computer, they are claim it was the one that invented software.  And it was used in an extensive library of subroutines.  Now, a subroutine was actually a small paper tape which was held in a little box in a small filing cabinet.  And when the person wanted to run their program needed a subroutine, the operator would put the subroutine through a paper tape reader and it would be punched into the next part of the paper tape that the programmer put in.
      So, this was the subroutine.  And it was the basis for Leo.  And Leo was the first business computer designed by lions for their corner tea shops and for a number of years it was a commercial success in the UK.
      So, how did it come about?  Morris Wilkes only died in 2010 at the age of 97.  He had a BA in maths from Cambridge and he was in the Cavendish Lab.  Got a Ph.D. in physics.  Now, he was whisked off to wartime service.  He was a radar boffi and a radiometer.  He was in the RSGB magazine as I remember.  And became the director of the University's mathematical laboratory.  He went off in 1946 to the USA Moore School summer lectures.  He caught the last two weeks of about a five or six week course because of problems with transport.  Presumably Cambridge wasn't going to give him much money to get there so he went slowly.  He learned about their ENIAC computer.  It was used to generate the trajectory of artillery shells.  And it was sort of  although it was in theory programmable, it was a fixed program which required lots of wiring and keyboard  and switchboards like  as used in telephone exchanges.  That set up programs.  And I understand it took something like two days to change from one program to another.  But he came back saying to his mates at Cambridge University, look, we got to have one of these.
      And so, this was 1946.  And he recruited a dozen or so of his radar technicians and they set about building in EDSAC with the valves that were available at the time.  The biggest problem, though, was computer memory.  In 1949, if they'd made it out of valves in sort of flipflops and things like that, it would require five tubes or valves per bit and he wanted something like 17bit words, 1024 words, so that would have used 79,000 valves.  They could not afford that number of valves and that amount of power.  The other possibilities were acoustic lines, a cathode tube where the display was put on the front of the screen and the electron beam addressed various areas and naught and ones were picked up by the charge in the screen.  That was the willows cathode ray tube.  Very difficult with needing screening.  And there were things like rotating magnetic drums.  Subsequently they were used a lot.  But at the time they were complex, expensive and very unreliable.
      And they limited the speed of the computer.  And so, they decided to use the  these acoustic delay lines, but the delay lines we were mercury in 5 foot steel tubes.  So, they made these banks and they were called storage tanks, each holding 16 36bit words.  And they were mounted in wooden boxes known as coffins.
      Now, the problem with these was that transducers at each end of the pipes had to be aligned to better than a thou, and the mercury had to be distilled regularly to remove any contamination.  And the speed of sound through the mercury was temperaturesensitive.  The tanks had to be temperature controlled to maintain sync with the EDSAC clock.  We get groups coming through the EDSAC display at the national museum of computing and the valve transistor circuits are explained.  But it ends with the lecturer holding up a 32gig SD card.  And he says to the kids, anybody know how much it would cost if implemented with the mercury delay lines you see behind you rather than silicon?  And I'm told that the answer is  let me just look at this on my notes  it would cost 30 billion pounds.  It would weigh 10 million tons.  And it would fill 10 battleships.
      So, that's what Moore's done in those 70 years since that early time.  That's why you have all those gigabytes in your mobile phones.  I mean, it is incredible.  So, as with the mercury delay lines, and to keep down the number of valves, EDSAC uses serial computing.  So, it's got 16 or 17bit words.  I say 16 or 17 because one of the  one of the bits is a sort of guard band.  A guard bit.
      But we pass on a single  single wire bust, main input and output buses.  We pass a serial data stream running at 500 kilohertz.  And these diagrams are from the original EDSAC report written in  between 1946 and 1949 of how they were designing it.  And it was divided into minor and major cycles.  A minor cycle being the pulse train associated with one word.  And then a major cycle being the number of words that were in a memory tube.
      So, you've got a repetition frequency of something like 870 words per second.  And that was typically the instruction rate of the computer.  A bit under that.  But it was  had a 500 kilohertz clock.  And without doing it that way, it would have used far more valves and far more power.  But, of course, you can imagine, it might be a bit of a problem.
      So, we have the original EDSAC team, that's Morris Wilkes and his chief engineer.  And you see the technicians there filling the racks, putting the racks in the  in the  putting the chassis in the racks, building up the computer.  And this is our reconstruction team in the last few years.  This is a display at the National Museum of Computing on the Bletchley Park site.  And we have tried to go from the original highresolution black and white photographs, identifying the position of the valves, the name that the function of each chassis.  And our leader there, the guy that you can see on the front right in the trousers, he runs the show.
      He was the European director of research for Microsoft.  Used to take Bill Gates around on his lecture tours and things.  And he has us all running around building the computer.  So, why build it?  Of course, as with all things, it started in a pub in Cambridge.  And it's Herman Houser, the director of Arm Computers, met David Hartley, the former director of Cambridge University computer lab.  And they asked Chris Burton of the computer preservation survey to do a feasibility study as to whether EDSAC would be recreated.  The whole thing was destroyed in 1958 when EDSAC 2 was built.  Just one or two chassis were kept and appeared later.  One was found in a garage somewhere in America.  And they did keep one of the  a very short mercury tank.  And one of the chassis that was used to put the bits in  put the bits into the tank and get them out of it again.
      So, Chris Burton, he reviewed the documents.  And the availability of components and decided it was feasible, but it would cost a quarter of a million pounds.  And that was to set up the new room at the museum and get all the parts and employee local contractors to build chassis and things like that.  And he had already recreated the Manchester Baby Computer which is in Manchester and is sort of about the same sort of time of EDSAC.  That was  and that does exist.  So, let me  sorry.  I meant to just say  there was only other thing.  So, we built it in order to celebrate the British  the early triumphs of British computer technology.  And to sort of try and revive this expertise before it disappeared.  And we wanted to learn about the challenges faced by those early computer pioneers.  And I have to say, they are challenges.
      So, the charity was set up and the money has been raised.  Now, authenticity.  That's a difficult word.  We didn't have a complete blueprint.  But we aimed to be consistent with the photographs and the contemporary records and use the components but use modern if they looked right.  But basically adhere to the principles that were laid down in that EDSAC report.
      Now, we didn't have any circuit diagrams.  Now, that's a bit of a problem when you're trying to build something.  You have to start from scratch just like the original pioneers did.  Although we did have the photographs of the chassis.  And we knew they made it work.  When they were building it, they didn't know if it would work or not.  But some way into the project in about 2014, a guy who had worked at Cambridge was working on the EDSAC 2 computer.  He remembered that he'd  he'd actually rescued the circuit diagrams.  They were about to be thrown out.  Rescued them from landfill and he heard about this rebuild project and he's presented the project with these circuit diagrams.  And basically we found we were sort of on the right lines with what we were doing.
      So, one or two of the original chassis existed.  You can see the top picture there is one of the ones that's been rescued.  And the bottom one has been created from computeraided design.  Of course, we had to work out where all the involves were going to be punch into the chassis, where the valve bases went.  But that was from the knowledge of the sort of circuits it need the and the pictures.  And we used a firm in Cambridge to make all these chassis, Teversham Engineering.  Then we needed to know how EDSAC works in detail.  We didn't have complete circuits.  We had diagrams that weren't consistent.  And there was evidence that they continually developed the project as they went along.  So, it was a continually changing computer we were trying to build.
      so, a logic simulation was built.  Which runs  is actually  it can be downloaded from the web.  And this is one of the typical logic diagrams from that  from the original report showing accumulators and the  it's the same von Newman define that computers are today.  They actually hadn't invented the index register there, which gave a few problems with writing programs.  But anyway, the logic simulation has been built.  Runs slowly on a PC and translated into a log and runs on an FPGA.  We can see the serial wave forms we expect from the computer.
      And this logic simulation does actually work.  Now, it was built by radio and radar engineers.  So, it tends to use AC coupled circuits and analog wave forms and the valves available at the time, EB34 double diodes, single diodes and a few others.  But those are the main valves used.  Now, interestingly, they're actually available.  You can still buy them, new old stock.  But what you couldn't do is get things like the valve bases.  They were in chassis that were destroyed.  We had to go to China to get the valve bases.  Digital logic is expensive, there's three pentodes and three diodes.  They are imperfect and don't work well together.  We have had to do lots of experiments to see how it all works.  Here is a typical diagram from that early document.  And it's  it says it was a circuit of a flipflop.  Now, you probably know that flipflop is a bistable.  The sharpeyed ones amongst you will notice it's actually a monostable.  There's a single CR time constance in the middle.  So, it just produces a pulse when triggered.  So, what they cleverly did is they added the reset pulse circuit which can actually reset them on the stable early.  Which means you can use it as a set/reset flipflop.  Now, that was a big mistake because that's given us so many problems.  It turns out it's very sensitive to the strength of the pulses that it gets.
      Sometimes it will reset, sometimes it won't.  Sometimes you send a reset pulse to it and it sets it.  And that's given us the most trouble and caused a lot of setbacks in the actual commissioning of the machine.  This is the boot.  Now, you probably  some of you might remember that in very early computers one actually toggled the input code in on switches.  And, of course, subsequent to that, computers have had a run that operate when is you first switch on.  Now, these are post office telephone uniselecters.  electromechanical switches.  And they're wired up on these terminals.  When it starts, that goes click, click, click, click.  And that data goes into the first memory zero of the  tank zero of the computer.
      So, the mapping the logic to the chassis.  This is  these are the high resolution black and white pictures we had.  And as we zoom in, we can actually see the sort of valves that were there.  We can identify the 55s and the 54s, and the diodes and things.  And we can zoom right in to the  you should just about be able to see that says coincidence.  Unit something or other.  Three, possibly.  We know that's the chassis that does coincidence.  That's when the memory word in the tank matches the word you have in the selection register.
      And you have to wait for it to come round.  So, the coincident unit puts out a pulse when the word you want is in the tank.  It's come round.  So, we had to get these parts.  I say, valves were available as new/old stock.  B9G valve holders for the air 55s and 54s had to be bought from China.  And they didn't actually make them very well.  Someone had to go along with a dentist drill and drill out some of the pin  the sockets to make them fit a bit better.
      We couldn't use the original type of components because they would have been too unreliable.  But we got components which look similar.  We've handmade tank strips.  And we have to use delay  delay lines in various places to make signals wait a little bit while something else catches up with them.  So, we've got lumped circuit delay lines.  And you can see the pancake coils at the bottom, they have been specially wound for us to make these various delay lines.
      Now, it so happens that Milton Keynes, from Marshall Amps who specialize in valvebased guitar amps.  So the regeneration chassis have been built by them.  But nearly all the other chassis have been built in people's sheds, garages and I love that picture of Edshack.  That's one of the guys I work with, James, he built quite a few of the chassis.  It's amazing.  Got a carpeted floor.  Very impressive.
      And there we have an original 1949 chassis.  And the equivalent 2013 version.  That's  I'm not sure  that looks like it needs a few more components in it before it was ready to go in.  But you can see we've tried to adhere to the same build standards.  Now, as we've said, with these mercury tanks, now, health and safety said you can't have all these huge great tubes of mercury.  And it's going to cost too much and we've already established that temperature stability was going to initiate.  So, it was decided to emulate the mercury delay lines with nickel delay lines.  That's a nickel while and you use the magneto in the wire to pass a pulse from one end of the wire to the other to give the necessary delays.  But at the moment we're using processes as shift registers because the nickel delay lines have been running as a parallel project and haven't been actually installed in the system yet.  And then we compare a long nickel delay line in the left hand picture, you can see the spiralwound wire with transducers at either end.  It produces modern components and produces signals that go back into the valve tanks.  And then the little pic board that is used to simulate that.  And that's what we're using at the moment.  So, there we have EDSAC as it was in 1949.  And as it is now at the National Museum of Computing.
      Now, my job  oop.  Okay.  I'm being waved at.  I've got to move on a bit faster.  So, the timeline started 2010 and I won't go through that.  But we raised the money.  We've done the design prototyping.  We've started construction and we're now in the commissioning phase.  And that's where I came in.  I had a series of lucky coincidences.  I retired from space science engineering in 2011.  I helped run the hack Space.  And I joined the mailing list for the national team.  And one day I was invited to help repair BBC micro power supplies.  I got involved.  And I went to an open source weekend, weathering bytes.  We simulated EDSAC on you are a board.  I was fascinated by this project.  We had various talks about the history of the computer.  So, I became a volunteer at TNMOC and asked to join the EDSAC rebuild project.  So, nearly all the chassis have been built and tested of the 142.
      They're all sort of working on the bench.  They don't work too well when they're put all together.  And that's where I've come in.  Our first instruction has been executed and we've had the thing running several automatic cycles on its own.  These are the sort of circuit diagrams we are working with.  Obviously I won't go into detail.  But those of you with knowledge of involves will recognize the various  they're all pentodes here with diodes used for DC restoration where you have AC coupled circuitry.  The top line you can see one of the DC coupled things flipflop FF1.  And underneath it the bottom one is we still have one of the original monostables.  We're trying to decide at the moment whether we need to change that flipflop from a monostable to a bistable circuit to make it a bit more reliable.
      Now, just quickly want to flip through.  This is a tribute to the maker community.  Because one of my colleagues is using a 3D printer with an Arduino which is used to  as the solid state injector unit where we inject op codes into the system.  And we've even 3D printed nuts which weren't available for some of the front panel switches.  They made them very realistic.  I have done a lot of debugging with oscilloscopes.  And that's a pulse, the yellow trace, which turns on the output from one of the memory tanks.  And that was a series of ones which should all be the same level.  They should decay in amplitude.  That's because of some DC bias problem.  I've had to tweak things in an amplifier.  We have imperfect logic circuits here.  And the bottom right shows what happens when you pass a signal through an end gate.  The pulse that we want is the one towards the right hand end of the screen.  But we've had to deal with a DC level that shifts up due to the imperfections due to the various diodes used in the end gate.  We have signals too high for a naught, and too high, ideally, up to 20 volts.  That's a 5 volt.  Going to about 15 or 16 volts.  That's quite good compared to a lot of the things.  And we had oscillating cathode followers.  This was softwaredesigned radio receiver.  Apparently the post office went round to the EDSAC when it was first built and said you're interfering with local short wave reception.
      And I found that when you have a pair of cathode followers that was driven by a signal and its inverter, the whole thing formed a cathode coupled multivibrator.  And that's the frequency varying as I squeeze together the wires coming from those, the interchassis connecting wires.  That's the third time harmonic.  It was the oscillating at about 8 or 9 megahertz.  I used LTSpice for the various circuits.  We have the valve characteristics available in LTSpice.  And I show the effect of loading an amplifier by the simulation of the wires connecting one to another.  Converting a squarish wave form to a Triangular wave form.  I've been told to finish.
      I've done a lot of a lot with logic analyzer.  Cheap Chinese circuits.  And only this week I built a 4pound logic analyzer, 16channel using a knockoff Cyprus USB evaluation module from China.  We have been using that only a couple of days ago.  You can see the sort of wave forms I'm looking at using this analyzer, trying to understand how the coincident circuit is working.
      And finally 
      >> Okay, we have set instructions loaded into the memory of the computer.  When I press the button, it will execute the first of the instructions.  And the zed instruction will ring the bell and stop the machine.
      TONY: Perfect.
      >> It worked.
      [ Laughter ]
      [ Applause ]
      TONY: Have we got time for questions or not?
      >> No, not really.  I'm afraid we need to free this tent up for the music for this evening.  So, if you want to speak with Tony, the bar.  We can drift over towards the bar.  Before you leave, can you please help us out.  Something you can do to volunteer right now is to pick up a chair and several chairs next to your chair and stack them up against the walls of the tent.  And that would be really helpful.  

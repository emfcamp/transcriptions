      10 years building self-balancing ride on robots
      
      John Dingley
      
      
      >> Okay.  Now the next talk is John Dingley to tell us about a decade of making selfstabilizing ride on robots.
      JOHN: Hello, everybody.  My name is John Dingley.  I've never been to the EMF Camp, but I will be there next year.  There are friends from various maker fests over the years.  To give you a spoiler alert, I'm not an engineer, hardware or software.  But my hobbies drift very much into that area.  And as I've run things over the years, it's actually helped me with my job.  I'm what the Americans call an anesthesiologist.  In medical terms, that means I'm a gas man.
      So, I found this video back in 2008 when I was starting this hobby.  And this was a guy in America who is now a Microsoft software engineer.  He was trying to build a selfbalancing skateboard and he summed up the pains of this experience quite succinctly here.  I'll show this short clip.
      >> Riding this device is like being on an episode of Jackass.  You're bound to get hurt, it's bound to be funny, but it's bound to be painful.
      JOHN: I can attest to all those things.  Why did I start this hobby?  If you look at popular mechanics, these wonderful devices with one wheel, tanks, motor bikes, with heroic people doing heroic things on them.  In 2001, at a German university they got a hold of a solid-state unit and built a unicycle with a Gokart tire.  And it balanced.  And I found a video from Norfolk, this guy built a skateboard, Ben Smither.  He was a software engineer, with the main tech there.  And he put in video up.  The balance is beautiful.
      Now, this is before Segways were well known.  Before the devices in China.  Back in the day this was quite a phenomenal thing to see.  And if really inspired me to build something like this.  I was wanting to advance my electronics from my sort of schoolboy experiences.  And get into microcontroller programming.  So, I thought, I'll build one of these.  How hard can it be?  Well, actually, it is quite hard.
      So, what do I need?  I need a motor.  That's okay.  That's okay.  Understand that.  Some sort of power controller.  That needs to be controlled by a computer.  How does a computer control a power controller?  Don't know.  Have to read up on that.  But we've got the Internet and it was going okay in 2007.  So, you need these sensors, accelerometers and gyros.  How do you use them?  I don't know.  Have to look that up and read up.  What maths do you do on the data from the sensors to tell it to stop you from falling over?  Don't know.  But have to look at that as well.  A lot of reading required.  What software?  What code?  What coding language do I need?  I write it on my laptop, I know that.  And transfer it to a little computer in the board.  Like microcontroller.  I know that.  How do I get it from my laptop to the microcontroller?  Don't know.  Have to read that up.
      That's where we were.  I knew how to code.  Because I had done that when I was 14.  I built all these fabulous Sinclair computers.  Many are too young to remember this, but this was phenomenal.  You could build a programmable computer attached to the TV that did things for hardly any money.  Bearing in mind the school computer at the time was from the university.  Secondhand.  And it filled the whole room.  So, this was amazing stuff.
      So, well, here's the microcontroller I got.  Arduino boards hadn't come out yet.  It looks a bit like a kind of proto Arduino.  It was from active robots.  It came with almost no documentation.  So, I knew you programmed it in C.  I knew it had inputs from sensors and outputs to control things and a big sort of socket here which you somehow plugged your laptop to, to load the software on to it.  We've got the brain.  Now I need to know how to program in C.  Right.  I know it's BASIC, C must be similar to BASIC, surely.  I downloaded the whole book of C.  It was a PDF.  Turned out to be that thick.  Like a dictionary of C.  So, I started studying that.
      And I thought, well, I've got to write this program.  What do I write it on?  What environment do I use?  So, you know, the Internet's come on a bit since then.  It wasn't that obvious how you did these things.  But I knew that the manufacturer of the chip had a program environment called AVR Studio, this thing here, that you could write your program in and save it on to your hard drive.  Great.  How do you get program from the laptop on to the microcontroller?  Again, you guys  to you guys, that's like dead simple.  But if you searched that at the time on the web, it wasn't clear.  It was sort of assumed you knew.
      So, right.  So, had about a week of surfing the web I found this odd program called Pony Prog which would allow you plug a parallel point leading one end and the other end of the cable into the board and you could get your program on to the microcontroller.  So, we could program the brain of our machine.  Great.  Making progress.  That's about a month of work there to get to that point.
      Now, I was helped.  My life was saved by this guy.  Shane Colton, lecturer at MIT.  These guys are always at MIT it would seem.  He wrote a course on getting his students to build Segways.  How to use a data from an accelerometer and a gyro in a useful way to control something like a Segway.  And he explained it in reasonably simple terms and maths that I could understand.
      Why do you need a gyro and an accelerometer?  A gyro scone  how technology advanced.  This is the Vulcan bomber, gyro scope for the autopilot.  Okay.  So, I've got a friend who is into retro aircraft.  Goodness knows how many millions of pounds were used to develop that.  And that's the equivalent from spark fund, it's about $10.  And it's actually better.
      So, that just shows you where things are.  Back in 2007 things weren't $10.  They were a bit more than that.  The gyro I used this was from silicon sensing systems.  It's still available, it's used no older Segways and it's $263, which is about what I paid for it.  It's a bit like the cyclists.  When your wife says how much did the bike cost?  Divide it by two.  I didn't tell her it was that much.  And ordered an accelerometer.  You needed both sensors.  It didn't arrive on a board like that.  It arrived as in the picture, a pinhead with no visible wires.  Last when I did electronics, things came with wires that you could solder to.  I said, oh, great.  I after great struggles managed to solder tiny wires using a lens to the surface mount tabs on this little rectangle of nothing.  Nowadays they come like this on a board with labeled terminals.
      So, we've got a gyro, we've got an accelerometer.  What do these do?  You power up with 5 volts and these older ones put out an log voltage proportional to movement.  So, for an accelerometer, you can see how far you are tilted over from the vertical axis, gravity towards the center of the Earth.  The gyro will measure how fast you're falling over.  If you're on a say unicycle, how fast you're falling over on your face, it will actually measure that in degrees per second and you actually use the information from both.  Which I'll come to in a minute.
      So, here we are.  We've got a kind of test rig.  I'm wiggling a wooden board around with sensors.  We have data, we have an accelerometer reading and a gyro reading.  And I managed to fuse this data together and get something that was about ready to test.  And so, we have a lovely laser cut chassis.  We have a go kart in the center.  I was going to build a skateboard.  And I built the heaviest, leadiest battery acidfilled skateboard on the right.  And it actually balanced.  2008, after about three months of work, we've got this thing that balanced badly and is skateboardesque.  You steer it, by the way, by having the tire a little bit soft and just lean it one side or the other.  Rather like carving with a snow board.  And of hilarity ensued on the Internet when we put up the variant with the Hot Wheel name on it.  I didn't get sued by Mattel.  And let's do it again, maybe a bit more cheaply.
      Cheaper gyros were on the market that weren't $260odd dollars.  They were a little lest.  I built this test platform.  The bracketry is from B and Q, there's two cheap batteries.  The rear wheels from children's razor scooters.  Cheap chain drive and a sort of polyurethane tire.  So, they probably wondered why their spares department was being hit for requests for rear drive units once I put this on the web.  So, I did put this on the web as a kind of easy buildish selfbalances skateboard.  Way back.  Long before the children's hover boards came out in 2015 and everyone's just sick of the sight of the things, this was quite unusual.
      And as you said, I put it on and got a lot of views.  And it's sad to say, all the emails I get from Germany or from the US.  None from the UK.  Though in the entire time I have been doing this, maybe just one or two from the UK.  That is a bit sad.  But there we are.  So, here's something  we're in the middle of the journey now.  We've got something that works, it's reasonably small, there's a carrying handle on the side.  What have we learned?  We've got the battery on the top.  At one end, I have caster wheels.  I found if you stopped the front end goes into the ground.  It's best to have little wheels on the front so you roll to a stop.  Which is less embarrassing.  And you need a hand controller with one button.  That's the dead man button.  That means if you fall off, the machine doesn't travel along and smack you in the head when you're bleeding on the ground.  It makes the day worse.  If you let go the button, it cuts the power.
      You can have other things, it's useful to have the nose up.  And the machine tries to correct it by moving forwards.  So, you trick it into moving.  So, have a look at this video.  Now, there's something odd about this machine.  There's no visible battery.  The deck is really slim, and you just see the wheels.  And I was trying to make it sort of cool and I didn't want that huge battery box on the top.  So, if you ever wonder what's inside one of those Chinese duct tape batteries, that look like a brick, if you take the duct tape off, you'll see it's millions of lithium cells sort of badly spot welded and glue gunned together.  If you can dissect it out and put them into the deck of the skateboard, you can make a skateboard with a lovely, flat deck.  Unfortunately, if you're heavy, you couldn't ride it because it would bend and snap in half and everything would explode.  So, then I thought, cash fiber.  As we know, if something is made in carbon fiber, it's just better, isn't it?  For no reason, really.
      Don't cut carbon fiber with a grinding disk and a dremel using a Dyson Hoover to vacuum up the dust.  It will make a sound and stop working forever.  Which is what happened.  Luckily it was an old one.  Technical things on this, apart from the fact it's lovely carbon fiber, honey comb, it's got a wee nunchaku.  They're a rip off from the Chinese.  If you use it in crowded spaces with lots of people, it disconnects.  You pirouette down the road looking like that's what you tried to do all along.  This was at a street carnal.  I learned the lesson, go it a cable system.  It's less exotic.  But it's more reliable.  And with these things, reliable is what you need.  I did look at other ways of steering it.  One is to use pressure sensors for your trading foot.  Go on to the toe or heel and the machine would steer.  I saw this design concept of a CAD image of a rather nice design.  And tried to emulate it.  A really compact device.  Pneumatic tires, they are good.  They smooth out the bumps in normal Tarmac which you feel every one of if you have polyurethane tires.  And you could run it upside down.  So, that worked.
      I don't know why people do this.  People put beautiful CAD images on the web all the time, but never build them.  If you're going to do it, build it.  That's what I would say.  I'm not an engineer.  Just to see if it could be done.  I have a skateboard wheel hanging out opinion the go kart tire.  Could you build a onewheeled Segway?  It was called the thing, after the film.  Yeah, it kind of worked.  It was really hard to ride, really slow and really didn't offer any advantage technically over anything else.
      But it did improve.  So, here I am as a Darby maker fair on the left.  This is Nick Thatcher, the only other person in the UK on the right with the same hobby.  On one of his early machines.  It's reasonably controllable there.  It was a good bit of fun to ride.  If we go to our next slide.
      I was then kind of got  I work in a hospital, obviously.  But I meet people that are disabled.  A lot of disabled people who don't have spinal injuries can walk a short way.  People who use powered wheelchair, they can walk a short way, but not all the way around.  They hate being in these devices, in powered wheelchairs.  If you could build something that resembles a scooter, they would much prefer to ride them.  Could you build something like a Segway but based on something like a ruddy chopper.  I built this thing.  These are BMX wheels.  It's fluorescent yellow tires because I could.  And they were cheap on eBay.  And it did work and got a lot of interest.  And the idea is the legs go on the outside of the wheels rather than the ideas.  In fact, you can buy all of these kinds of things now from China, in fact.
      Again, another random event.  I was approached by someone who is a bit of a mover and shaker in London design world.  His son is a teenager and he has a problem with his legs and needs a power wheelchair, but he refuses to use one because they look like horrible things your grandmother will use.  Lead batteries in the bottom, and the swively casters that shout disabled and bang into door frames.  He wanted to design something, he would lead the team, that not only worked, but would be cool and it was for a teenager.  He wanted a twowheeled wheelchair.  He was prepared to raise the money to design this.
      And I said there's a game called Doom.  There's a film of the game and it's really awful, but it does have a character in the wheelchair.  And clearly the dimensions are wrong.  Look at the width of his shoulders versus the width of the machine, it's about 5 feet wide and would never go through a door.  Interesting design concepts.  One is the stalk that holds the control panel.  Which means you can run all your wiring up and down and know that it's protected for having curly cables coming up from the seat and coming around.  I said, all right, I'm a hobbyist.  I'm sort of getting known in this area.  I'll build you a concept demonstrator.  And it will have no safety features whatsoever.  It will look like a chair, it will selfbalance and you control it with a joy stick, not by leaning it forward and back.  It's not got a T handle.  It's not a Segway with a seat bolted to it.  It is controllable through a joy stick.  So, came up with this.
      And if you look at the controls, bit of early 3D printing.  I got a maker bot, the old plywood one at this point.  There is a joy stick that only moves forward and back.  It's from a flight simulator controller and it has a rocker switch, a large one, on the end.  So, forward and back give use direction.  Steering is the rocker switch.  The rest of the nicked from the Apollo lunar rover.  They had the same problem I had with this.  If you're bouncing around, you end up nudging the joystick forward and back all the time.  The machine goes crazy.  You have to lock your elbow somehow in place.  They had exactly the same problem on the lunar rover.  I got that from the Haynes manual on the lunar rover that you can buy in any good shop.
      A quick run around of the machine.  It worked well enough to make this video and allowed him to raise his first hundred grand odd to get it built.  It actually has rotor casters at the rear, so you can park it without it falling over.  But these retract into the fuselage at the back if you want to.  When you're in balancing mode, they are rear safety wheels, but they're actually airborne.  So, they half retract.
      And if we need to jump through this a little.  Maybe not.  Kids always ask you, how fast does it go, mate?  It doesn't how fast it goes; can you control this thing?  I'm showing in this video, it can be controlled.  And it did everything we wanted it to.  And it helped him raise the money required to take it to the next step.
      This is another fun project.  This is filmed at another maker fair.  Can you build a Vespa scooter with one wheel and make it look like secret Russian technology from the Cold War?  This is paneled in Chinese electric scooter panels that have been repurposed and repainted.  And it's just a fun machine.  And I cannibalized it for parts.  I should have kept it.  It's a good laugh.  That's the thing with the machines, they're fun to ride.  That's why I'm working towards onewheeled motor bike type devices they are the most fun.  I started with skateboards because you could jump off.  Nothing more than that.
      And entered the hacker day prize in 2014, I can't remember what the spec was, but we managed to shoe horn a onewheeled motor bike into the spec.  And we came up with this.  And it's got faring on it from a real motor bike, twin wheels, chain driver, 500 brush motor.  Can it worked.  But it was incredibly dangerous.  If you wanted to jump off it, your legs would get tangled up in the faring and you would cut the inside of your legs quite badly.  Happened a couple of times.  You steered it left and right which can be done if you're a circus performer.  But it was quite difficult.  It went, but it was dangerous.  We managed to get a few film shots.  It was featured on Discovery channel in America.  That was my first effort at a proper motor bike.  So, things to learn, no sharp pointy bits, keep it really slim.  The fuselage.
      Watch this video closely.  Watch it, watch it, watch it.  Oh!  Oh.  Right.  So, safety skid.  Those of you old enough to remember, Jerry Anderson's series set in the future, 1981.  The aliens are invading the Earth.  What happens is we shot them down with great interceptors.  They didn't have wheels, they had skis.  So, I thought, well, I could put the wheel out in the front in the air and it would look stupid.  Or have a cool skid thing.  That's what I did.  But in the video, testing the skid, it grips the Tarmac quite well and it would flip you over.  That's no good.  You have to test things and build them, not just design them on computers.  So, there's actually little tiny wheels embedded in the skid in fact in the actual production version with a nice big shock absorber chromed of course.  This chrome is good.
      This is just a short clip.  This is in south Wales.  I live in Swansea.  Beautiful beach, lovely and fat.  We have a machine that's kind of working.  The wheel is not from an aircraft.  Is that landing wheel from an aircraft?  No, rang up a guy, I want a tire that's like on a Dyson ball, you can't get one.  But you need a kite buggy tire.  That's a kite buggy tire, threewheeled device on the beach pulled by a kite.  And it skims.  That's fat.  Big fat tire, safety skid.  The one on the left here actually retracts with a linear actuator.  And the reason is that it looks cool.  Because obviously when it's retracted, it doesn't function as a skid in any engineering sense.  It looks cool.  It's up to you whether you want more danger in your life or not.  You can retract it.  It has a Mac meter.  If you bought a Mac meter on eBay, you need to use it for something.  That shows the motor power from 1 to 100% don't get to 100% with a selfbalancer.
      And talk about this in a second.  This is Sir Malcolm Campbell, bluebird, driving through the water to cool the tires down before his return run at 150odd miles an hour.  We'll come back in a minute.  We got it to work, it steered, it stopped, had some safety features.  Now is the time to really go for it.  Stop messing around with the 500-watt motor.  Put the 3,000 motor on it.  Came from China.  Came with tape all over it, they thought I was importing drugs.  It was a wide while with a widish tire on it.  The power controller was a problem.  You can't get high current brushless motor controllers easily.  Ended up using one from Robotech.  They're not cheap, but it works.  And now from an Arduino.  I've moved on, I'm using Arduino boards.
      And the other thing I bought was the head from the motorcycle.  They're much cheaper than Harley Davidson.  And they're huge, you can cram links goodies in them.  Next thing, battery pack.  Need a damn great big battery pack for this.  So, a cylindrical fuselage, so need a cylindrical battery pack.  This is CNC machines plastic battery pack.  These are the cells, 20 odd of them.  Battery management system and there's a giant contact.  Just like a giant relay.  Turn everything on and off at the front.  And this slides into the fuselage from the front.  So, we've got all the main parts built.  Obviously, it used to build.  This is what we built.  We actually brought this morning and played around with.
      This top right one is the first one.  You see, I had to give in and get rid of the skid and put a safety wheel from machine mart.  Fluorescent yellow.  It looks awful and doesn't work, it's too high up.  By the time that hit the ground, you are going over the handle bars.  Again, the biggest design challenge, believe it or not, was how to make the safety wheel at the front look even vaguely okay.  There's a website called deviant art where CGI artists put their work up.  A lot of it is science fiction.
      So, we have this contraption here with a machine gun.  All good motor bikes have machine guns on them.  But it does have this structure at the front which could be adapted to hide a wheel, perhaps.  So, by putting a lamp on the front to make it look like a light distracts you from the fact that there's a wheel in it and that's the safety wheel and it does actually work.
      This is a quick video with some audio.  Going through the controls which I had to skip over president dead man is a lever now.  It talks to you.  It has no displays.  You can't see the displays while you're riding this thing.  You're too busy trying not to die.  So, it talks to you and it uses an '80s retro voice which you can just download off the web to run on an Arduino.
      It won't come on until we bring it level, otherwise it will fly backwards.
      So, listen now.
      >> Autopilot start.  Stabilizer.
      JOHN: The American accent.  The balance point.  It's telling me the speed in percentage.  The motor power in percentage.  It's saying 1%.  That's what it's doing.  You can see there you can adjust the balance point.  There's meters for everything in the code and the twitch grid is used to adjust forward or back while riding it.  That's how you speed up or slow down.
      To do faster  that's the emergency brake lever.  Lean back, back, back, and then eventually slide off the tale on to your feet which is much more elegant than smashing your face in which is what happened earlier.  There's a steering system.  People think it shifts your weight to the right or left.  But it doesn't, it actually moves the wheel on to the left or right edge of the tire.
      I'll skip this, but I'll just leave you with this clip.  This is the sounds.  It's a very odd place to ride on Pennon sounds.  You hear the history of people greater than you riding on this thing.  It's miles and miles of very flat beach and I'm very fortunate to live close to it.  This is Nick who you saw earlier riding the machine.  You can see, it goes around, it's controllable, it does everything you want.
      And I'm over time so I'll stop there.  But I'll just leave you with the last slide.  Nick went to university and he designed this as his final year project.  As I said, he's the only other person in the country with this hobby.  So, the next project he might do is to get this working.  So, you may see this in the future at a meeting or a future maker fair, hopefully.  But there you go.  It's a fascinating hobby.  Thank you very much.
      [ Applause ]
      >> I think we have just enough time for one or two questions.  Anyone?
      AUDIENCE: Can you actually ride a unicycle under pedal power?
      JOHN: No, I'm pretty useless at writing a normal.  It's bad, I should learn to ride a normal unicycle.  It's on my bucket list of things to do, actually.  Yeah.
      AUDIENCE: I have one quick question.  Do you have any plans for applying for road legality?
      JOHN: It's interesting.  In the UK you cannot ride selfbalanced Segway on the pavement.  You can only ride on private land with the land owner's permission.  However, the wheelchair project is interesting.  If you look at the rules for powered wheelchairs and scooters, it doesn't say how many wheels you must have.  It's a maximum weight of 250 kilos which is very heavy.  And lighting things and rules such as  it must have reasonable directional control.  It must have a parking brake.  Excuse me.
      The other rules for mobility scooters.  Actually, you could build a twowheel wheelchair device and not be against the law.  Watch that space.
      >> Thank you.  That was astonishingly cool opinion thank you again.
      [ Applause ]
      and if people have  we could do with volunteers for the bar.  And if we have enough volunteers then we can keep the bar going until the very, very end.  So, please do sign up at EMFcamp.org/volunteer or go to the volunteer tent.


Maths and Video Games by Matthew Scroggs.
>> Good afternoon, EMF Camp. [Cheering]. They're getting  awake now. This is the talk all the parents are waiting for. I hope this will explain why you do have to do maths to be a video programmer? Please give a warm welcome to Matthew.
>> Thank you very much. I'm Matthew Scroggs at University College London where I study maths. I'm not talking about my research today. I'm going to give you some bits of maths that apply to video games. This is mostly retro arcade games. I will do some mathematical analysis. First of all, we will look at Pac-Man. You play as Pac-Man. You have to eat the Pac-Man dots before the ghosts kill you. The dots are arranged in a maze like this. When playing Pac-Man, the kind of thing you might wonder is whether it is possible to eat all the dots without having to double-back on yourself in various places. This is something we can work on. So the question is, we are trying to find out if Pac-Man can go around the Maze and only go down the road once and not go go back on himself. This is related to a very famous problem in maths called the Seven Bridges of Koningsberg. This town had seven bridges. You can see green is the islands. The white light bits are the rivers. And the orange bits are the bridges. The bridges were arranged like this. The story goes that, in the town, the residents would like to go for walks, and would try to go on a walk and cover each bridge exactly once. Maybe something like this you go over that bridge, round here, and then, the resident on that walk has missed that bridge at the top in the middle, so they didn't go - they failed it. In the 1700s, I believe, this man came along, and he explains why this is impossible. He did it by simplifying the problem. He said the shape of the islands, the distances are irrelevant. All that matters is the island and how many bridges are between them. He drew a dot which is the island and the lines where bridges went. Instead of having any of the geography, you just know the two connections between this island and this island. Then we can ignore the map, and now ear asking if you can draw a black line without take your pen off the page. He whooshing out this is impossible. He did that by looking at a point. If you choose one of the islands, this island has an even number of bridges connected to it. This means this is great if it is an even number. If you go on to the island, you can come off because it's an even number. If you come on again, you can go off. If there are a an even number bridges, you can come or your edges. If there's an odd number of bridges - so this one here - you're going to come on to the island again, and now you're going to be stuck because there's no bridge to come off with. If that is your last island, you're lucky, and you can stop because you reached the end. If that is not your last island, you will fail because you got stuck somewhere. Similarly, if this was the first island, you could have come off that bridge, and it would have been fine. An island with an odd number of bridges is going to be a big problem and make it impossible. Back to Koningbreg. You  we have four islands with an odd number of bridges. Therefore, it's impossible to draw around the town without a bridge more than once because you will get stuck on more than two of these bridges. We can apply the same thing to Pac-Man. This is a very old story. Con  the town is called Kolingrad. It now looks like this. It's actually now possible. You've got this kind of graph going on. You will see now there are two odd islands, and two even islands. If you start on one odd and finish on different odd islands, you can do it something like that. So now, actually, it's possible to walk around what used to be ... . We want to ask is it possible going down the Pac-Man map going down each route only once? We placed where the routes intersect and draw lines, and you get this. The dots that I've coloured red have an odd number of bridges coming off them. We don't need to count them. You can see there's more than two red dots, so it's going to be impossible because you will get stuck on that you will of those red dots. So we have worked out that Pac-Man is not easy. There's no way of completing Pac-Man without having to double-back on yourselves. We want to win a Pac-Man. Which routes do we want to repeat? This is known as the Chinese Postman Problem. It happens where most are call the Chinese Postman problem. This question is, given a collection of islands and bridges, or Pac-Man routes, what is the shortest route the postman has to talk down every road? One way you can solve this is the way you tend to go about solving this is you pick some of the edges to double up. Maybe you could double up that edge on the bottom and that spiralling up there. You can kind of pretend that instead of repeating that edge down there, you make a second copy of it, and now all the islands have an even number of bridges so you can down the map. You can do this in different ways. For this, for four islands, there are three different ways that you can add these edges. You can do those pairs, those pairs. The one at the bottom. There's a new edge going from four at the bottom to four at the top which isn't a - you would have to go around the side or other side. Three different ways of doing this. Six islands, you're going to have 15 different ways of matching up to check. Ten you will get 945. On Pac-Man, there are 20-odd islands, nodes. So, for Pac-Man there are 654 million ways that you need to check. I need to find which of those has the shortest you need to cover, which is quite a lot but it's enough that I left my old lap to be running overnight, and it told me that, in order to complete Pac-Man in the shortest amount of distance, you should repeat the edges I've marked on that graph there. It would look something like this. Imagine the Pac-Man sound playing. You go round there. You go down here. Repeat that one. We repeat this one. Round there.  Hooray! That is the shortest route to complete Pac-Man. [Applause]. But you will have noticed when watching that there was some choice that I could have made. In some places, I could have went up the side, if I had gone over the top and repeat it the other way. There's a lot of choice as to which order you do repeating it, which is using because it means I try different ones and found ones that avoids the ghosts but it isn't necessarily true that all of these are the same lengths. We maybe able to do better than that. If we look more at how Pac-Man moves, so let's first look, if you're turning a corner. If you press the down button in that frame, it takes this many frames to turn corner, if you press one later, it will take one more to go down. When you're moving Pac-Man down, you press down in that frame not that one, so you save one point of movement. Luckily, if you hold the down button, Pac-Man will - holding direction when going around a corner is the best way to Coroner in Pac-Man. Going straight across like that, you might think that it is bleeding obvious that this is going to be the shortest way of doing it. You just go straight across. But, actually, if you press down in that frame, and then straight on again in that frame, Pac-Man actually jumps one frame across and then straightens up again, so you can cut one frame of movement out of there. When you've got crossroads, you've got two choices. If you're going straight up wards, you take one point less, because Pac-Man moves differently going up is going across. So, if you're going up, you shouldn't do this attempt at cornering trick. If you look at these two, doing them both as corners, you get 50 frames, as straight lines, you get 57 frames. You should try at crossroads to make both Demme into turning rather than going across. And similarly, we can look at positions like this, and the one on the right is the shortest one there, because the one on the left, it has kind of a double bit of extra distance where the one on the right, you can turn round at the Pac dot before you reach the corner. You should always try to do this. We know which edges to repeat. We need to find a way of repeating the edges. There are a few choices. So here, IBA the same edges before, and I'm using these choices for turning corners to make sure that it is actually the shortest amount possible. Here is me attempting that. I'm going to go back in show that again. When I go past the first upwards, watch closely because for two frames, he jumps back down again. I used a tool to get this one working because I can't react that quickly. He lurches up and then back again. I worked out the shortest routes. There are a few different ways that you could do it, but in all of them, the ghosts will get you. It's not possible to complete Pac-Man in the shortest distance possible. We have a different question:  what is the shortest route possible that avoids all the ghosts. Eventually, I'm going to sit down for a very, very long weekend and play all of the possibilities like this and possibility of one frames longer until one works and I will find the shortest. I've not done that yet. We're going to leave Pac-Man behind, at least trying to find the shortest route of Pac-Man behind. There's one other thing that is interesting in Pac-Man. When you go off to the left or right of the screen, you come back on the other side. So, if you go off there, you will come back on the other side. This is a little bit weird because if I walk out that side of the tent, I will not come straight through that door unless I'm very magic. Pac-Man is living in a weird space. But, actually, if you think about it a little bit, you can kind of understand what Pac-Man is actually doing here. So I'm going to mark arrows now to show that those two sides match up. We can see when Pac-Man goes off there, and facing upwards, it may be his head is facing upwards, he comes back on the other side facing the same direction. You can imagine picking up the Pac-Man map and bending it round so these two arrows meet up. You can imagine the shape you might get if you bend this round if the arrows meet. Hopefully, you imagine something a bit like this. Going to leave this for a second because this took ages. [Laughter]. Pac-Man lives on a cylinder. This is quite demon in lots of old retro games. Bubble Bubble, you go off the bottom, and come back on the top. You can bounce bubbles upwards. This is the same but rotated. If you imagine bending it round again, Bubble Bubble is on a cylinder. It won't help you play any better but it's a useful thing to know. So that is when we took a rectangle and said if Pac-Man comes on the other side, he comes in facing the same direction. We could say if Pac-Man goes off the right, he comes back on the left but he's now upside-down. So we could flip one of these arrows over and say what if we did that? Now, you can imagine, imagine that that rectangle floats out of the board, and kind of it's now made made of flexible material. I would like you to imagine taking that flexible material and trying to bend it round so those two arrows match up on the opposing side and visualise what you get. I want you to imagine what you're expecting to see first. It is like a cylinder but it's got a twist in it. If you come to the Maths Village, I'm sure we can show you fun things you can do with these. As far as going off one side and coming back on the other this is about as much we can talk about. This asteroids, hopefully, you all know that you fly around shooting Asteroids, if you go off the top, you come at the bottom, off the right and you come back on the left. It's like Pac-Man but an extra rule going round the top. So we can draw this  something like this. If you go on one side, you come the other side facing the same way. And - again, it seems like a 2DT game but you can imagine taking this off, bending material and seeing what shape you get. Visualise that first if you're going to imagine what will happen. Imagine taking that, bending it round so that the Red Arrows touch, and taking whatever you get and bending it so the blue arrows touch. Hopefully something like this. You take the cylinder, you bend it round, and you get a donut or a Taurus. You're welcome to call it doughnut after this talk! Right, so, actually, Asteroids is a three-mention essential game because they're - 3D game. We can play with this rule. We flip this around a bit. How about we take the red arrow on the right, and we flip it upside-down, and for some reason, the blue one swapped, doesn't matter, facing the same way. Now, if we go up the top, we come up the bottom. Now, if we go off of the right, we come back on the left but we are going to be upside-down. So, a game on this might look something like this. You fly off the top, you come back on the bottom. But now if you fly off the right, you come back upside-down on the other side. It's confusing and hard to play. You always hit asteroids, you can't tell where you're going. It's really odd. Again, we can think of this game and try and work out what kind of surface the asteroids are moving on. I will give you some time to think about it. See if you can imagine what will happen. Take this,  and now if you do the blue ones, think what you're going to get by now. Think how you're going to do the red ones. Do the blue ones, and you get a nice cylinder. Then you try and bend it round, but now we have a problem. We can get near the Taurus, and we've got the arrows, but the arrows are facing in two opposite directions. You can twist these around and bend them about but whatever you do, you can't work out how to get these to match up. And in three dimensions, you can't. You can do this in four dimensions. A drawing of it looks like this, 3D picture is a bit like this. You've got your cylinder and bend it round. It has to go through itself and come out from itself inside out. This is a Klein Bottle. That's what the game of A radios with this rule will be played on. You notice you could do one more game. How about if we swap the top and the bottom. The left and the right are upside-down, and the top and the bottom are also upside down. The game is even harder to play now. You go off the top and you come on facing the wrong way, and you've got the side, if you watch the asteroids go off the side, they come on facing the other way upside-down. This one is even harder to visualise what is going on. I will show you what this surface would look like. You have to imagine that you take your surface, bend it round and then somehow you have to also bend it to the top and the bottom match-up. What you get is often drawn like that. In this picture, I can't tell what that's meant to be. The best way to visualise it is if you take this. This is a surface which a long line cuts through itself. It is a weird spirally surface that has a self-intersection point. Imagine stretching this out a bit and bending it over, and then kind of closing that shut so the two parts touch. It is that surface. You bend it round, and then close it off like that. This is if you sit down and think about it later, it would have the same kind of behaviour I showed you. It's another four-dimensional shape. This is called the real projected plane. It's the real projected plane. It has the behaviour like that. As far as rectangles go, we're done with asteroids for now. But you could go further do games on hexagons. This is the kind of - hexagons. You could match up the arrows and see what you get. If you bend this one round and stretch it out a bit, you get a double Taurus, a figure of eight with two holes, two doughnuts glued together. Okay. When we played Asteroids in a Taurus, there was a problem with what we did. All the lines were the same length, and those lines are also the same length. It takes the same amount of top to fly over the top of the screen as the bottom. When we bent it into a Taurus, that circle around the middle is a lot smaller than the circle around the outside. Actually, this isn't quite an accurate representation of a radios, because we are doing lots of stretching. It is possible to do this without any stretching. To do that, I would like you to imagine that that is kind of like one across the rectangle, and then it's moving around the other one, so you can imagine that you're taking your one orbit around the rectangle, and moving it around like that. You've got a cylinder doing this kind of movement. If we trace that out, this is the kind of shape that after radios have to live on. Now if you follow follow a point on the circle as it goes round, those are following the same amount of distance because it's not rotating as it goes. But at the bottom there, the kind of shape, surface shape cuts back through itself. So this again isn't possible in three dimensions, but it is possible, you can do this in four dimensions, and four dimensions, you have extra space there to bend the Taurus round itself and it will work. I'm going to claim to you how that After radios is a four-dimensional game. When you play After radios, you're playing a game in four dimensions. Another game it happens is Final Fantasy. If you bend it around, you will get again the same kind of animation again, you bend it round, and you get a doughnut shape. So, again, in Final Fantasy when you have this map behaving like this, you would expect the world to look like a doughnut. If you play the game, they show you a lovely picture of a sphere there which is not what you're living on! But to finish, I kind of thought I would explain to you what is wrong to say that's a sphere. I will show you what actually happens when you do a sphere. This is the world map you're probably most used to. I'm sure you know if you fly off that side, you come back on this side, but unlike asteroids, if you fly on there, you don't come on to the top, you will kind of maybe come along somewhere like that. But it's a little bit more complicated than that, so, if we look at Asteroids on that map, it is what it would look like if you fly round on a sphere. As soon as I start flying upwards, you have a weird, curving bending. [Laughter]. You become huge and move really quickly! [Laughter]. This is all because the Earth is a sphere, and the map is a flat surface, and because the sphere is curved, and the map is not curved, there's no way of perfectly representing what the sphere would look like. So, however you draw a map, ideally, you draw a map where angles and the size of things on the map are the same on both the sphere and the surface, but it's impossible to do this perfectly. So the one I've shown you is most demon projection, and this sort of, because you can't do a map perfectly, you have to choose some things you would like to keep from the map. Some things you will lose. This projection was chosen if you're on a boat and you pick a bearing from north and sail along that, that will be a straight line on the map. That's not a straight line on the sphere, because as you go down, you would curve in a straight line. If you follow a bearing, it looks like a straight line on the map. This map is using for navigation but gets things very, very wrong by the north and south poles, particularly, the Arctic is huge. An alternative to fix that is the Galls Peters projection. The angles are all messed up. No-one has any idea what angle is anywhere but the areas of everything is the same. In this one, the relative side of the UK to Australia is correct. You can fly Asteroids around this map. So you can see this time, when you go towards the top, you don't get bigger but weird and crushed and start to move in odd directions. I find this one hard to play. If you go straight upwards, you appear miles away. There are lots of other ways of doing 3D spheres on to a flat stays. I will show you one more. The last one is the Craig projection, sometimes called the Mecca projection which is centred on Mecca, and, if you go anywhere in the world, say to Ledbury in the United Kingdom, and you put the map down, and you measure from north where you are the angle round to the red dot there, that will tell you the angle where the bearing from where you are to where Mecca is. If you want to pray towards Mecca, this map will show you every direction to play in. That is the angle on the map shows you the angle in real life that you should pray in order to face the right direction. Although representation is a bit of a lie, there's no Antarctica, in fact, the whole half of the sphere is hidden away. It would have to go on top of what is currently there which is what I did when I made this in Asteroids so you can watch me fly around the face here. If you fire in the cross to the middle, the bolts go through the boss. If you thereby around away from it, you bend all over the place, and these, the bits on the side are infinitely tall as well, so you get lost sometimes. For finding the angles to certain places, it's really useful. Yes, I die a lot in this one! Right, so that is the bit I have to show you. Just have more things. Mathteroids, if you want to have a go at this, you can play the levels of Mathteroids, and hopefully, this evening, it may  may be coming to the badge. Tomorrow, we might get it on the badge. Otherwise, that's the end of what I've got to say. Thanks very much for listening! [Cheering]. I won't to Q here. If you go to the Maths Village up by the lake there, I will go over there and chat to anyone who wants to chat. 
>> Thank you once again, Matthew! [Applause]. 
The making of TiLDA Mk4 by Marek Ventur.
>> Hello, and thanks for coming. This talk is in no way rushed whatsoever! Please excuse! Please excuse the uncoordinated bits in it.
>> Oh, hello. Hi. As ever, with the badge talk, we're starting out with a quote from Jonty that we entirely ignored! So, this is still the Mk4, or - I can't see my slides. How we manufactured a replacement Nokia 33 0 mother board. Early 2017, we all went to Nottingham for a badge team meet-up. Ostensibly sorting out badges from the previous year, and we - hang on, the slide hasn't gone on. He recally 2017, we had a badge team meet-up and decided to give everyone a pager because we are stupid! It turns out the easiest way to give everyone a pager is to get GSM modules. If you're already giving people GSM modules, you want to make it into a mobile phone, and, yes, oops! That happened! We did a lot of software and realised we haven't ton any hardware yet. We got to April this year, realised that, oh, we should probably design something, so we can actually have a badge instead of some software! So, we quickly hacked this together. It kind of worked. Kind of worked. It mostly worked, didn't it? The E F1 worked. It was square. Probably don't give to things - don't give things to people that are square. So, this one we manufactured it. Took half an hour to fix the machine again afterwards. 3 minutes and 30 to make. We spoke to some of our sponsors. They said can you make it look more like an end gauge and less than a 3310. We were going for the replacement 3310 mother board just to annoy Jonty! This is the initial EMF2 prototype plan. We kind of went a bit for engagy with it. We essentially stole the design from the previous year's badge, and modified it, and, you know ... . Went a bit more mobile phone-y. This is so mapped, primary mapped, I don't know. Which one of you is MatA and MatB? You get - you want to talk about the EMF2 design thing, or ...? 
>> We did the nice square board with the schematic and the lay-out. We need something that looks like an N-Gauge. This was zero, one, two, three, yes. Four nights, solid nights of design work and, after about seven or eight nights, we finally got to - yes, that. So, yes, this was very rushed and quick. Halfway through doing this, our sponsors TI turned round to us and said nice, simple, modular Wi-Fi chip package won't be available because it is brand new silicon, they couldn't manufacture enough for us, so we had [inaudible]. We erased the board.  Yes, so that was - we've knocked it out in about three weeks. Then we sent off add five PCB [inaudible]. We had five PCBs manufactured in the UK, built them at home, on my desk, with my tweezers, and the oven. Cooked the first ones. Hand-built. Then we were like the next two weeks testing, trying to write code, and we designed it, and then it was ... design done on the 9th July. Finally sent the final design over to China. Specs on the badge. Huge thanks to Texas Instruments for their support. ... from them which we've imported micro-Python into with their help. The chip itself is 128-pin chip, plus a 16-pin port expander to connect all your buttons up. [Sound cuts out periodically]. Some of you might have noticed the jack footprint. That was done in the last 30 minutes before we sent it to China, "I think this might work". We didn't place it. 
>> Talking about the micro Python development. One of the interesting things on that is the MSP432. That was released around about March this year. You will note that we started working on it in January last year. We had worked with TI, had a great design. Unfortunately, in order for them to be able to sell it for sponsorship, we needed to be able to work with their latest API which was a year after we started porting micro Python. Thankfully, they did a port for us. It did delay us. We planned ahead but we were still delayed. The near pixels they work. They didn't work an hour before Jonty had his badge on stage. At least this time, it was just software! And it's been fantastic doing my micro Python again because we have had so many people able to bring in apps and stuff. 
>> I went in after the hardware stuff because absolute [sound cut". Micro Python means everyone can write Python script and it runs on the badges. We can improve on the store. We moved everything to GitHub to streamline the whole process. So far, 43APRs have been merged and probably ... . Please, keep it up, and thank you so much for all the work you've done so far. I ... of the app that has made it into so far, and you can find all of them on the badge store, and import them, and they will be yours. We have at least five different home screens. I've pictured ... . More when I was working around yesterday, made other ones ... . I have no idea why two different completely independent dating apps! [Laughter]. ... someone has started ... work on these. Really early, and I've no idea where it is coming from. Thank you for that. We have obvious, we have to have a snake, we have to have a Break-out. Thanks to the person who made the break-out. I'm sure it's a lot of improvements we can do to Snake as well. Sound, we had a speaker. 12 buttons, we had to make a ... as well. It's very minimal. Please improve on it. There is also another app, and I've no idea how it works. It looks pretty. Also, there are some random EMF-related apps. Most notably one which tells you which beer it is on, and the one that gives you the current webcam feel of the campsite. And there are lots of other like random arty 
Stuff. And I can just reiterate, please push all your changes. Other ones might be [off mic]. 
>> Buildings the badges is extremely hard, obviously. We can't do it without the support sponsors. It would be ludicrously expensive without their and the manufactures yes support in the first place. This year, we've managed to keep it down to as small a number of sponsors as possible, and Texas Instruments have been so good to us and HDD did the assembly. I'm surprised that HDD as we were such a pain last time. They volunteered to do it again after they remembered - they were lovely. It was worse this time. I think maybe next time ...! We will see what happens. So MathWorks supported us again. The majority of the sponsorship that mattered for the badge in terms of the hardware was Texas Instruments, HCD Hologram who gave everyone the IoT SIM cards which you can activate anywhere in the world, and Lime microsystems who did a ludicrous amount of work for the GSM network. We didn't expect that. "We accountant to do a GMS network". And then they went, "We will just build you some base stations and do all the things." We were, "What, we will do all the witnessing SNP" "I don't understand why you were being so nice." They were wonderful, and we can't thank them enough. Everyone who has been involved in this sponsor-wise, they've been so good to us, and they've dealt with the fact that we are a little bit ... sometimes. We are hoping in the future we get to work with them again. Thanks to all the sponsors. If any of the companies are here, I would like to meet you afterwards. And I'm going to hand off to Sam to talk about how the GSM network was done. 
>> Thank you. So, yes, I have no slides really to prepare. I think I have one that says GSM Network. At least it is not a - so, yes, I kind of had lunch with Jonty in March sometime. I bought him lunch, actually! And then I ended up agreeing to do something! I don't quite know how that works but surely you should have bought me lunch! He said I want to build a GSM network. Give everybody a GSM badge, I need the network. So, our main aim was to try and build something that could support the badges and not cause problems. Lime Microsystems provided us with some hardware using their SDR radios, I have a background in building networks. I will talk about how we did the network and how we did it in the Knock talk later. The badge, you guys talk about any of the problems you had with GSM? Shall I a little bit? So, as you probably know, it hasn't worked particularly well with GSM, because everything getting pushed out, we did finally come to the conclusion of what the problem seems to be, and this has a very low-tech modification which you might be able to see, but I've bent my antenna around 90 degrees! What it seems to be was the antenna on the board causing interference with the buttons, and this is hardware these guys know more about than I do. Fundamentally, when the thing started transmitting, GSM is a bit more RF-noisy than Wi-Fi and things, and especially with these antennas, I've worked in - we had labs of people testing, even when Nokia would produce what you would think was a production-ready phone, we would spend six weeks with it in labs analysing how it behaved with our network. Alistair had one on his desk at home. It is a slightly more lower budget level of RF testing. We've learned some stuff on that, I think. The good news is that I think there is a firm wear fix which will improve things. Up  update the badges which will reduce the problem, and bending your antenna - if you're careful, will help, hackable. This one is on the GSM network. The GSM network has generally been working. I have had a phone attached for most of the time. I was literally rebooting the space station. Shall we chance a live demo? What could go wrong! [Applause]. [Off mic]. It rang and I answered the call. The calls still up. You can hear me through there, can you? "Can you hear me talking?" [Applause]. I suspect I have the volume turned down on the badge somewhere, the speaker volume in the app. Building a phone is really hard! I kind of knew this. I will talk about the network and how we worked with the infrastructure stuff in knock talk. But yes. 
>> You might have released, we have a sign on the badge tent saying there are currently no badges because yesterday, when we were handing them out, so many people come, so many people wanted the badges that we just - they were gone, like what happened? We had a much higher pick-up of people wanting badges this year than 2016. Our calculations, we had a higher failure rate on the badges. Two things combined, led to a shortage. We have managed to bring it back into life, and we will be starting a few of them. I'm not trying to get any hopes up too high. We will get a few of them out later on. Regularly, if you walk past the badge tent, I can't promise any current ... . 
>> A couple of things about the availability, and why we have so few badges. The failure rate this year has been large, to put it - this is a matrix mix of things. It's not though assembly plant's fault in any way. We were much later than we needed to be. They had to do a rush job to get it done in time. Some of that is things arriving from China really late, some of it is just component availability. Some of it is the fact that half of the components are on very small reels so they had to patch them together and every time they did it, they had to cut reels off there were components on it. Every time they did this, we lost badges because there weren't enough components. What is our actual failure rate so far? I think we planned for like 15 per cent, and it was something quite a lot larger than that. Also, the badges were so expensive to make this year, we could not afford to make more than 2,500. We knew there was going a drop-out on this, but normally we have about 70 to 80 per cent pick-up on the badges anyway, so we were like, "That would be fine. What could possibly go wrong?" Then everybody wants really bad phones! It hasn't worked out how we expected. It never does. This whole event hasn't worked out as we expected, everyone seems to say it isn't bad, which is good. Other than that, we are going to repair badges, we are going to get as many made as we can. We are going to do a second run of the badges. But with the remaining components that we have, and the remaining boards, we're going to do another 250 or so which should be enough for everybody that didn't get one that really wants one. I had a chat to Ian, the director of Hackers earlier on, and he is going to be very lovely and he's going to autograph all of the broken badges, so, if you would like an autographed badge by Ian Softly, we will be able to provide you those as well which makes it probably more valuable than the badges anyway! 
>> [Inaudible]. 
>> Yes, and we will swap those for a, would one if you want. I think I want a broken one more than a working one now! We're going to do our best after the event to do this, but we're going to be pretty broken for about the next month. We have a history of, "We will to in a week after the event" and I guarantee it won't happen a few weeks after the event. Probably in October time, we will deal with this and make sure everyone gets one. I hope everyone is understanding about that. It's mostly out of our control. . 
>> We have 125-ish, 2016 badges which are for sale if you want one from 2016. They work, yes! Apart from the Neopixels.  Where are we selling them? Yes, so later this afternoon, come to the badge tent, first come, first served. £30, cash only. I'm going to note that the cash thing is working in the bar again - you're now able to get cash to buy a badge. Is that everything ...? A big shout out to all the volunteers if you're here. [Applause]. [Cheering].  ... . And Amy, for doing the ... which looks amazing. [Applause].  Everything was last-minute, everything was a bit rushed. There were people who are not quite happy. Did it very well, the camp ... so, ... . [Off mic].  Everybody ...time I will speak ... [off mic]. This again, and where.  [Off mic]. When are we going to do this again and where? The whole badge or the event? The whole thing? We will talk about that later! [Laughter]. At the moment, the answer is never, and I'm going to retire! No, no, EMF will be continuing, don't worry. We will talk about that in the closing ceremony. If we can go straight to badge questions, that would be easier for now. Are there any other badge questions coming from the audience? One there, and there is one there. And one here. . 
FLOOR:  I was wondering what's the best thing you've seen someone do with the badge, a previous one, this year? What is the most inventive or uses the most components out of one? 
>> Yes, someone in 2016 wrote a geo location app that figured out, based on access point IDs and signal strength, triangulated your position. Alistair again! 
>> Stop being so good! 
>> Triangulated where you were on site, and then would show you the now and next talks in the right stage. Someone took your app and made it even better! Then, also, the person who won the competition last year, James. Is he here? He wrote a complete 3D renderer of the badge which was amazing. That was really cool. He did it in a day in Python. It's been ported? In 2014, someone wrote an entire operating system which was kind of amazing. They emailed it to me in a zip file! [Laughter]. It's on GitHub now. There you go, you see. He's here as well. And I can't remember what else has happened. Yes, the dating apps are cool, if a bit creepy! We would like to know the people are who have written those. If you can say hi. How serious are you? We need to know! [Laughter]. Yes. More questions? 
>> The feature we would like to add for 2020 is for it working at the beginning of the event. Claus. Honestly, I don't. The GSM thing was aiming a little bit high. The fact that we pulled it off at all is remarkable. Oh, there's been talk of GPS every single time, e-paper several times which we're not doing e-paper. It just breaks really evil. It is a terrible idea for a badge. FPGA has been talked about. We don't know. Ideas are very much welcome, actually. We're looking for idea for the next badge. The next badge we will go quite a lot simpler, and, hopefully, with a bit of a theme to it that works solidly. Mostly so we can actually finish it on time. Then I got excited! So then, I think maybe I need not to be involved. So, yes. Other questions? 
FLOOR:  Follows on from that: how about a badge hackathon scheduled for two months before EMF Camp so everyone interested in getting apps in advance, and that gives you a two extra deadline slack working anyway. 
>> Two months ago, I was still designing the PCB we had, maybe two prototypes in existence. Yes, I had a green EMF prototype in the badge tent on the help desk and it disappeared. Who walked away with it, I would like it back, please. Only one of two in existence! 
FLOOR:  A follow-on from - 
>> We're going to try to do stuff earlier. Talking much features, we would love to have a development environment that emulates the badge before the site. We thought we might manage to do that this time, but so much stuff changed late on. If anyone would like to work with us on that, that would be super cool. We are likely to stick with micro Python. If anyone could help us build a badge emulator, that would really help us in the future. I'm sure one of you wants to do this. 
FLOOR:  Can we get a touch screen next time? 
>> So the 2016 badge came with the non-touch screen, and you can actually get the touch screen version on there. We did actually up until we ran out of pins, and I needed still to have allocate the touch-screen pins on this badge, but I've put so many buttons on there.  The square buttons, this is one of our fantastic support from the Shenzhen sources, that those square buttons I found them at 28 p a button which would have made them 3.50 per badge which is why you've got the nice square soft buttons rather than the ... . A massive shout-out to NorbertAllnet, a Shenzhen component - they've been incredible. We're emailing saying we want these weird things, and then he makes it happen. My favourite thing was like stuff being run around in taxies? Shenzhen to make sure it got shipped in time. They're so good, but it - I ended up in Shenzhen by accident earlier in the year, and maybe I could do some stuff for the badge. I was like wow.  That's naïve. It's unfeasible to do anything there without having someone on the ground. They are amazing, if you want to get any electronics made, I can't recommend them enough. They can work out PC production. They basically have just done it nice. Allnet.de, I think. You want Norbert. He is wonderful. Tell him we say high. 
FLOOR:  Has anybody tried to - capacitors lately, global shortage? Us trying to source any comparators we need? 
>> Impossible without someone in Shenzhen who was able to go ... . Yes, so, ... . [Off mic]. 
FLOOR:  Given the slots and things to work with on this badge. Have you seen any... add-ons for it? You put the... add-on connector.
>> That was the last-minute thing. It was there was a tweet on the day I was out to send the designs.
>> Is thering the going to be this connector on there? It was like "Can we fix this connector on?" I'm like argh! At the time, I thought I was in a van on the way to Manchester to collect a vending machine and it was I'm trying to finalise this and add this connector. 
>> New versions. ... someone make an adaptor.? Haven't implemented any of the software side, so someone else needs to do that. You'll have to do the actual protocol thing for the pin out hasn't changed between versions one and two. You can make it work. Maybe a question, not a comment. 
>> You said you did a Nokia 331 on clone, what would you not like next year? [Laughter]. 
>> [Off mic]. 
>> Possibly not just a badge at all so then we don't have to do all the work. We don't know, really. It's really hard to say. I think there's been so much gone into this. This team has been incredible. They've worked really, really hard for a very long time. Full credit to Matt as well for not sleeping for two weeks to get the PCB design done, and I think we need to - yes, we've forget to mention that - forgot to mention that that. There was a problem with the PCB production and an email saying, "Somebody needs to be here at the production plant today within the next few hours or this isn't happening." Matt, who lives in Nottingham ran out the house, got on a train and went straight there, and was there all day to sort it out. It's been that kind of operation the entire time. It's been frantic. The fact that it's happened at all is kind of remarkable.  Can we get a round of applause for the badge team? [Cheering and Applause].  
>> We have a lot more stories about this badge, some of which we would rather weren't recorded. If you want to hear them, pop by the bar later on, find us, and we can tell you all sorts of things that's happened. It's been emotional. So, yes, I hope you enjoyed playing with them. We will keep shipping firmware updates to them. It will be going into upstream micro Python as well. TI do loads of great work for that. Hopefully, for the next camp, we will have the GSM network again, and you can bring them back and they will work flawlessly in theory. We say that about the bangs every time. Thank you all for coming, and see you around on site.